# ==============================================================================
# INSTALACI√ìN DE PAQUETES NECESARIOS PARA EL AN√ÅLISIS DE SERIES TEMPORALES
# ==============================================================================
#
# Este script instala todos los paquetes de R necesarios para el an√°lisis
# completo de la serie temporal NYSE.
#
# Uso: source("requirements.txt")
#

cat("üì¶ Instalando paquetes necesarios para el an√°lisis de series temporales...\n\n")

# Lista de paquetes requeridos
paquetes <- c(
  "forecast",      # Modelos de pron√≥stico y herramientas ARIMA
  "tseries",       # Pruebas de estacionariedad (ADF, KPSS)
  "ggplot2",       # Visualizaci√≥n avanzada de datos
  "zoo",           # Manipulaci√≥n de series temporales
  "gridExtra",     # Composici√≥n de m√∫ltiples gr√°ficos
  "dplyr",         # Manipulaci√≥n de datos
  "tidyr",         # Limpieza y transformaci√≥n de datos
  "knitr",         # Generaci√≥n de reportes
  "kableExtra",    # Tablas con formato mejorado
  "scales",        # Escalas y formateo para gr√°ficos
  "lubridate",     # Manejo de fechas
  "ggfortify"      # Extensi√≥n de ggplot2 para series temporales
  "timeDate"
)



# Funci√≥n para instalar paquetes faltantes
instalar_si_falta <- function(paquete) {
  if (!require(paquete, character.only = TRUE, quietly = TRUE)) {
    cat(sprintf("  ‚¨áÔ∏è  Instalando %s...\n", paquete))
    install.packages(paquete, dependencies = TRUE, quiet = TRUE)
    library(paquete, character.only = TRUE)
    cat(sprintf("  ‚úÖ %s instalado correctamente\n", paquete))
  } else {
    cat(sprintf("  ‚úì %s ya est√° instalado\n", paquete))
  }
}

# Instalar todos los paquetes
cat("Verificando e instalando paquetes...\n\n")
invisible(sapply(paquetes, instalar_si_falta))

cat("\n‚úÖ Todos los paquetes est√°n instalados y listos para usar!\n")
cat("\nPaquetes instalados:\n")
cat(paste("  ‚Ä¢", paquetes, collapse = "\n"))
cat("\n")

# Verificar versiones
cat("\nüìã Versiones de paquetes clave:\n")
cat(sprintf("  ‚Ä¢ forecast: %s\n", packageVersion("forecast")))
cat(sprintf("  ‚Ä¢ tseries: %s\n", packageVersion("tseries")))
cat(sprintf("  ‚Ä¢ ggplot2: %s\n", packageVersion("ggplot2")))

cat("\nüí° Para comenzar el an√°lisis, ejecuta: source('main.R')\n")
